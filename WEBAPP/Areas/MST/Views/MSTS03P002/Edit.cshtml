@using FluentBootstrap
@using WEBAPP.Helper
@using DataAccess.MST
@using UtilityLib

@model MSTS03P002Model
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_LayoutChildPage.cshtml";
}



@using (var form = Html.Bootstrap().Form().SetId("form1").SetHorizontal().Begin())
{
    @Html.AntiForgeryToken()
    using (var row1 = Html.Bootstrap().GridRow().Begin())
    {
        using (row1.GridColumn(6).SetMdOffset(2).Begin())
        {
           // @form.SelectFor(t => t.KEY_ID, Model.KEY_ID_MODEL.ToSelectList("Value", "Text", Model.KEY_ID), isRequired: true).IsDisabled()
        }
        @form.HiddenFor(t => t.PIT_ID)
    }
    <br>
    using (Html.Bootstrap().Div().SetId("HEADER").SetVisibility(Visibility.Hidden).Begin())
    {
        @Html.GetVSMWidgetsBegin(Translation.MST.MSTS03P002.ISSUE_CRITERIA)
        using (var row = Html.Bootstrap().GridRow().Begin())
        {
            using (row.GridColumn(12).SetXs(12).Begin())
            {
                using (var r = Html.Bootstrap().GridRow().Begin())
                {
                    using (r.GridColumn(8).SetMdOffset(1).Begin())
                    {
                        @form.InputFor(m => m.ISSUE_TYPE, isRequired: true).SetIndexParameter(1)
                    }
                }
                using (var r = Html.Bootstrap().GridRow().Begin())
                {
                    using (r.GridColumn(8).SetMdOffset(1).Begin())
                    {
                        @form.TextAreaFor(m => m.REMASK, 4).SetMaxLength(400)
                    }
                }
            }
        }
    @Html.GetVSMWidgetsEnd()
    }
}


<script type="text/javascript">
    //$("#btnFinish").removeAttr("disabled");
    // $("#formDetailModels #P_NO").attr("disabled", "disabled");
    $(document).ready(function () {
        CLOSE_ALL();
        var x = '@Model.KEY_ID';
        var a = '@Model.IS_USED';
        $("#form1 #HEADER").removeClass('@Css.Hidden');
        if (x == 'P') {
            $("#form1 #PRIORITY").removeClass('@Css.Hidden');
        } else if (x == 'I') {
            $("#form1 #HEADER").removeClass('@Css.Hidden');
            if(a == 'True'){
                $("#HEADER #ISSUE_TYPE").attr("disabled", "disabled");
                $("#HEADER #REMASK").attr("disabled", "disabled");
            }
        }
    });
    function CLOSE_ALL() {
        $("#form1 #PRIORITY").addClass('@Css.Hidden');
        $("#form1 #ISSUE").addClass('@Css.Hidden');
    }

    $(document).ready(function () {
        $("#RES_TYPE").change(function () {
            var a = $('#RES_TYPE').val()
            RESET()
            if (a == 'D') {
                $("#T_RES_TYPE option[value='H']").hide();
            } else if (a == 'B') {
                $("#T_RES_TYPE option[value='H']").hide();
                $("#T_RES_TYPE option[value='D']").hide();
            } else if (a == 'W') {
                $("#T_RES_TYPE option[value='H']").hide();
                $("#T_RES_TYPE option[value='D']").hide();
                $("#T_RES_TYPE option[value='B']").hide();
            }
        })

        function RESET() {
            $("#T_RES_TYPE option:selected").prop("selected", false)
            $("#T_RES_TYPE option[value='H']").show();
            $("#T_RES_TYPE option[value='D']").show();
            $("#T_RES_TYPE option[value='B']").show();
            $("#T_RES_TYPE option[value='W']").show();
        }
    })

</script>